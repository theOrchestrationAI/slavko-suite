{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Unified Multimodal Feature Set",
  "description": "Standard output schema for the SlavkoFusion multimodal integration layer",
  "type": "object",
  "properties": {
    "modality": {
      "type": "string",
      "description": "Type of modality detected",
      "enum": ["text", "image", "pdf", "ui", "code"]
    },
    "features": {
      "type": "object",
      "description": "Extracted features based on modality",
      "properties": {
        "text": {
          "type": "string",
          "description": "Extracted text content"
        },
        "objects": {
          "type": "array",
          "description": "Detected objects in image/UI",
          "items": {
            "type": "object",
            "properties": {
              "label": {
                "type": "string",
                "description": "Object class label"
              },
              "bbox": {
                "type": "object",
                "description": "Bounding box coordinates",
                "properties": {
                  "x": {
                    "type": "number",
                    "minimum": 0
                  },
                  "y": {
                    "type": "number",
                    "minimum": 0
                  },
                  "width": {
                    "type": "number",
                    "minimum": 0
                  },
                  "height": {
                    "type": "number",
                    "minimum": 0
                  }
                },
                "required": ["x", "y", "width", "height"]
              },
              "confidence": {
                "type": "number",
                "description": "Detection confidence (0.0 to 1.0)",
                "minimum": 0.0,
                "maximum": 1.0
              }
            },
            "required": ["label", "bbox"]
          }
        },
        "layout": {
          "type": "object",
          "description": "Layout analysis results",
          "properties": {
            "aspectRatio": {
              "type": "string",
              "description": "Aspect ratio (e.g., '16:9', '4:3')"
            },
            "dominantColor": {
              "type": "string",
              "description": "Dominant color in hex format",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "orientation": {
              "type": "string",
              "enum": ["portrait", "landscape", "square"]
            },
            "grid": {
              "type": "array",
              "description": "Grid layout information",
              "items": {
                "type": "object",
                "properties": {
                  "row": {
                    "type": "integer"
                  },
                  "col": {
                    "type": "integer"
                  },
                  "content": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "ocr_text": {
          "type": "string",
          "description": "OCR extracted text from image/PDF"
        },
        "entities": {
          "type": "array",
          "description": "Named entities detected in text",
          "items": {
            "type": "object",
            "properties": {
              "text": {
                "type": "string"
              },
              "label": {
                "type": "string"
              },
              "confidence": {
                "type": "number",
                "minimum": 0.0,
                "maximum": 1.0
              }
            }
          }
        },
        "sentiment": {
          "type": "string",
          "enum": ["positive", "neutral", "negative"]
        },
        "functions": {
          "type": "array",
          "description": "Functions detected in code",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "line": {
                "type": "integer"
              },
              "complexity": {
                "type": "integer"
              }
            }
          }
        },
        "complexity": {
          "type": "integer",
          "description": "Code complexity score",
          "minimum": 0
        },
        "language": {
          "type": "string",
          "description": "Detected programming language"
        },
        "pdf_metadata": {
          "type": "object",
          "description": "PDF document metadata",
          "properties": {
            "page_count": {
              "type": "integer",
              "minimum": 1
            },
            "title": {
              "type": "string"
            },
            "author": {
              "type": "string"
            },
            "created_date": {
              "type": "string",
              "format": "date-time"
            }
          }
        }
      },
      "additionalProperties": false
    },
    "metadata": {
      "type": "object",
      "description": "Metadata about the extraction process",
      "properties": {
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "ISO-8601 timestamp of extraction"
        },
        "checksum": {
          "type": "string",
          "description": "SHA-256 checksum of raw input",
          "pattern": "^[a-f0-9]{64}$"
        },
        "extraction_time_ms": {
          "type": "number",
          "description": "Time taken for extraction in milliseconds",
          "minimum": 0
        },
        "model_used": {
          "type": "string",
          "description": "Model used for extraction if applicable"
        }
      },
      "required": ["timestamp", "checksum"]
    }
  },
  "required": ["modality", "features", "metadata"],
  "additionalProperties": false
}